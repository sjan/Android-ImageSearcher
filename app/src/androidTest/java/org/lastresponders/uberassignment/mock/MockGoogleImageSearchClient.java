package org.lastresponders.uberassignment.mock;

import org.lastresponders.uberassignment.data.access.GoogleImageSearchClient;
import org.lastresponders.uberassignment.exception.MessageException;
import org.lastresponders.uberassignment.exception.NetworkException;

import java.util.HashMap;
import java.util.Map;

/**
 * Created by sjan on 1/18/2015.
 */
public class MockGoogleImageSearchClient extends GoogleImageSearchClient {
    public static String NETWORK_EXCEPTION = "NetworkException";
    public static String MESSAGE_EXCEPTION = "MessageException";
    public static String OUT_OF_RANGE = "OutOfRange";
    public static String ONE_RESULT = "OneResult";
    public static String DEFAULT = "Default";

    Map<String, String> responseMap ;
    Map<String, Exception> exceptionMap ;

    String defaultResponse = "{\"responseData\": {\"results\":[{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"1944\",\"height\":\"2896\",\"imageId\":\"ANd9GcRCQVXkikrYeJ4Uo02l_7debTFXTrYX0g2kIEiHqROYj9Uo6-j5THK756U\",\"tbWidth\":\"101\",\"tbHeight\":\"150\",\"unescapedUrl\":\"http://upload.wikimedia.org/wikipedia/commons/4/41/Fire.JPG\",\"url\":\"http://upload.wikimedia.org/wikipedia/commons/4/41/Fire.JPG\",\"visibleUrl\":\"en.wikipedia.org\",\"title\":\"\\u003cb\\u003eFire\\u003c/b\\u003e - Wikipedia, the free encyclopedia\",\"titleNoFormatting\":\"Fire - Wikipedia, the free encyclopedia\",\"originalContextUrl\":\"http://en.wikipedia.org/wiki/Fire\",\"content\":\"Photo of a \\u003cb\\u003efire\\u003c/b\\u003e taken with a\",\"contentNoFormatting\":\"Photo of a fire taken with a\",\"tbUrl\":\"http://t3.gstatic.com/images?q\\u003dtbn:ANd9GcRCQVXkikrYeJ4Uo02l_7debTFXTrYX0g2kIEiHqROYj9Uo6-j5THK756U\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"6000\",\"height\":\"4000\",\"imageId\":\"ANd9GcRJ4UWEdjbi-1gsoOlJzA9Cdob2dm6RuYp5Op8K10WPucdLfAKtn9oxRxM\",\"tbWidth\":\"150\",\"tbHeight\":\"100\",\"unescapedUrl\":\"http://dreamatico.com/data_images/fire/fire-2.jpg\",\"url\":\"http://dreamatico.com/data_images/fire/fire-2.jpg\",\"visibleUrl\":\"dreamatico.com\",\"title\":\"The meaning of the dream in which you saw «\\u003cb\\u003eFire\\u003c/b\\u003e»\",\"titleNoFormatting\":\"The meaning of the dream in which you saw «Fire»\",\"originalContextUrl\":\"http://dreamatico.com/fire.html\",\"content\":\"\\u003cb\\u003eFire\\u003c/b\\u003e\",\"contentNoFormatting\":\"Fire\",\"tbUrl\":\"http://t3.gstatic.com/images?q\\u003dtbn:ANd9GcRJ4UWEdjbi-1gsoOlJzA9Cdob2dm6RuYp5Op8K10WPucdLfAKtn9oxRxM\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"2197\",\"height\":\"1684\",\"imageId\":\"ANd9GcQKtRZhfG77pONRG3HDDve0A8gffxFtyMZKoQTOSUhpbs5s0rtK80lWtAM\",\"tbWidth\":\"150\",\"tbHeight\":\"115\",\"unescapedUrl\":\"http://dreamatico.com/data_images/fire/fire-4.jpg\",\"url\":\"http://dreamatico.com/data_images/fire/fire-4.jpg\",\"visibleUrl\":\"dreamatico.com\",\"title\":\"The meaning of the dream in which you saw «\\u003cb\\u003eFire\\u003c/b\\u003e»\",\"titleNoFormatting\":\"The meaning of the dream in which you saw «Fire»\",\"originalContextUrl\":\"http://dreamatico.com/fire.html\",\"content\":\"\\u003cb\\u003eFire\\u003c/b\\u003e\",\"contentNoFormatting\":\"Fire\",\"tbUrl\":\"http://t3.gstatic.com/images?q\\u003dtbn:ANd9GcQKtRZhfG77pONRG3HDDve0A8gffxFtyMZKoQTOSUhpbs5s0rtK80lWtAM\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"1000\",\"height\":\"667\",\"imageId\":\"ANd9GcSBqy2gLsDMorvfKMPzVxBDIgMmJhT5pKiQiDnKe5_MVfEsbeftk6xzHgzx\",\"tbWidth\":\"149\",\"tbHeight\":\"99\",\"unescapedUrl\":\"http://disasteridaho.com/wp-content/uploads/Fire.jpg\",\"url\":\"http://disasteridaho.com/wp-content/uploads/Fire.jpg\",\"visibleUrl\":\"disasteridaho.com\",\"title\":\"Water damage, \\u003cb\\u003efire\\u003c/b\\u003e, mold and emergency services in Idaho\",\"titleNoFormatting\":\"Water damage, fire, mold and emergency services in Idaho\",\"originalContextUrl\":\"http://disasteridaho.com/\",\"content\":\"\\u003cb\\u003eFIRE\\u003c/b\\u003e DAMAGE\",\"contentNoFormatting\":\"FIRE DAMAGE\",\"tbUrl\":\"http://t1.gstatic.com/images?q\\u003dtbn:ANd9GcSBqy2gLsDMorvfKMPzVxBDIgMmJhT5pKiQiDnKe5_MVfEsbeftk6xzHgzx\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"5100\",\"height\":\"3403\",\"imageId\":\"ANd9GcS4EZaDuWuVeAtym_GNt2qDGvMd9_HJ1NtyMzRzESIonhKP4ktn5q3ilZc\",\"tbWidth\":\"150\",\"tbHeight\":\"100\",\"unescapedUrl\":\"http://kdrestoration.com/wp-admin/images/FIre.jpg\",\"url\":\"http://kdrestoration.com/wp-admin/images/FIre.jpg\",\"visibleUrl\":\"kdrestoration.com\",\"title\":\"\\u003cb\\u003eFire\\u003c/b\\u003e \\u0026amp; Smoke Restoration | My Website\",\"titleNoFormatting\":\"Fire \\u0026amp; Smoke Restoration | My Website\",\"originalContextUrl\":\"http://kdrestoration.com/?p\\u003d220\",\"content\":\"\\u003cb\\u003eFire\\u003c/b\\u003e \\u0026amp; Smoke Restoration\",\"contentNoFormatting\":\"Fire \\u0026amp; Smoke Restoration\",\"tbUrl\":\"http://t1.gstatic.com/images?q\\u003dtbn:ANd9GcS4EZaDuWuVeAtym_GNt2qDGvMd9_HJ1NtyMzRzESIonhKP4ktn5q3ilZc\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"1678\",\"height\":\"1119\",\"imageId\":\"ANd9GcTD0sIf3N9h9VcmA58Md03xHPhyIEwdhV-c2AeiJlxEr8AJaTCo506qxr8\",\"tbWidth\":\"150\",\"tbHeight\":\"100\",\"unescapedUrl\":\"http://emford.com/_uploads/fire.jpg\",\"url\":\"http://emford.com/_uploads/fire.jpg\",\"visibleUrl\":\"emford.com\",\"title\":\"Protecting your business: Commercial Property \\u003cb\\u003eFire\\u003c/b\\u003e Coverage \\u003cb\\u003e...\\u003c/b\\u003e\",\"titleNoFormatting\":\"Protecting your business: Commercial Property Fire Coverage ...\",\"originalContextUrl\":\"http://emford.com/928\",\"content\":\"\\u003cb\\u003efire\\u003c/b\\u003e\",\"contentNoFormatting\":\"fire\",\"tbUrl\":\"http://t3.gstatic.com/images?q\\u003dtbn:ANd9GcTD0sIf3N9h9VcmA58Md03xHPhyIEwdhV-c2AeiJlxEr8AJaTCo506qxr8\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"1600\",\"height\":\"1200\",\"imageId\":\"ANd9GcQMZH9hx_1elSipZwH06BrGqDyrYGJ5RedyDHYvkPAFoL8BBOS_lo2NJWA\",\"tbWidth\":\"150\",\"tbHeight\":\"113\",\"unescapedUrl\":\"http://www.seraphicpress.com/wp-content/uploads/2012/03/fire_07.jpg\",\"url\":\"http://www.seraphicpress.com/wp-content/uploads/2012/03/fire_07.jpg\",\"visibleUrl\":\"www.seraphicpress.com\",\"title\":\"Blacks Set White on \\u003cb\\u003eFire\\u003c/b\\u003e: “You get what you deserve, white boy.”\",\"titleNoFormatting\":\"Blacks Set White on Fire: “You get what you deserve, white boy.”\",\"originalContextUrl\":\"http://www.seraphicpress.com/blacks-set-white-on-fire-you-get-what-you-deserve-white-boy/\",\"content\":\"Let\\u0026#39;s review: The New Black\",\"contentNoFormatting\":\"Let\\u0026#39;s review: The New Black\",\"tbUrl\":\"http://t2.gstatic.com/images?q\\u003dtbn:ANd9GcQMZH9hx_1elSipZwH06BrGqDyrYGJ5RedyDHYvkPAFoL8BBOS_lo2NJWA\"},{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"800\",\"height\":\"533\",\"imageId\":\"ANd9GcTVmjHSzPNssS184e5vkwI-588NsuSHVhieVnFQ7rw89AkwswDgarZwKazQ\",\"tbWidth\":\"143\",\"tbHeight\":\"95\",\"unescapedUrl\":\"http://upload.wikimedia.org/wikipedia/commons/3/36/Large_bonfire.jpg\",\"url\":\"http://upload.wikimedia.org/wikipedia/commons/3/36/Large_bonfire.jpg\",\"visibleUrl\":\"simple.wikipedia.org\",\"title\":\"\\u003cb\\u003eFire\\u003c/b\\u003e - Simple English Wikipedia, the free encyclopedia\",\"titleNoFormatting\":\"Fire - Simple English Wikipedia, the free encyclopedia\",\"originalContextUrl\":\"http://simple.wikipedia.org/wiki/Fire\",\"content\":\"\\u003cb\\u003eFire\\u003c/b\\u003e\",\"contentNoFormatting\":\"Fire\",\"tbUrl\":\"http://t0.gstatic.com/images?q\\u003dtbn:ANd9GcTVmjHSzPNssS184e5vkwI-588NsuSHVhieVnFQ7rw89AkwswDgarZwKazQ\"}],\"cursor\":{\"resultCount\":\"62,400,000\",\"pages\":[{\"start\":\"0\",\"label\":1},{\"start\":\"8\",\"label\":2},{\"start\":\"16\",\"label\":3},{\"start\":\"24\",\"label\":4},{\"start\":\"32\",\"label\":5},{\"start\":\"40\",\"label\":6},{\"start\":\"48\",\"label\":7},{\"start\":\"56\",\"label\":8}],\"estimatedResultCount\":\"62400000\",\"currentPageIndex\":0,\"moreResultsUrl\":\"http://www.google.com/images?oe\\u003dutf8\\u0026ie\\u003dutf8\\u0026source\\u003duds\\u0026start\\u003d0\\u0026hl\\u003den\\u0026q\\u003dfire\",\"searchResultTime\":\"0.23\"}}, \"responseDetails\": null, \"responseStatus\": 200}";
    String oneResult = "{\"responseData\": {\"results\":[{\"GsearchResultClass\":\"GimageSearch\",\"width\":\"1944\",\"height\":\"2896\",\"imageId\":\"ANd9GcRCQVXkikrYeJ4Uo02l_7debTFXTrYX0g2kIEiHqROYj9Uo6-j5THK756U\",\"tbWidth\":\"101\",\"tbHeight\":\"150\",\"unescapedUrl\":\"http://upload.wikimedia.org/wikipedia/commons/4/41/Fire.JPG\",\"url\":\"http://upload.wikimedia.org/wikipedia/commons/4/41/Fire.JPG\",\"visibleUrl\":\"en.wikipedia.org\",\"title\":\"\\u003cb\\u003eFire\\u003c/b\\u003e - Wikipedia, the free encyclopedia\",\"titleNoFormatting\":\"Fire - Wikipedia, the free encyclopedia\",\"originalContextUrl\":\"http://en.wikipedia.org/wiki/Fire\",\"content\":\"Photo of a \\u003cb\\u003efire\\u003c/b\\u003e taken with a\",\"contentNoFormatting\":\"Photo of a fire taken with a\",\"tbUrl\":\"http://t3.gstatic.com/images?q\\u003dtbn:ANd9GcRCQVXkikrYeJ4Uo02l_7debTFXTrYX0g2kIEiHqROYj9Uo6-j5THK756U\"}],\"cursor\":{\"resultCount\":\"62,400,000\",\"pages\":[{\"start\":\"0\",\"label\":1},{\"start\":\"1\",\"label\":2},{\"start\":\"2\",\"label\":3},{\"start\":\"3\",\"label\":4},{\"start\":\"4\",\"label\":5},{\"start\":\"5\",\"label\":6},{\"start\":\"6\",\"label\":7},{\"start\":\"7\",\"label\":8}],\"estimatedResultCount\":\"62400000\",\"currentPageIndex\":0,\"moreResultsUrl\":\"http://www.google.com/images?oe\\u003dutf8\\u0026ie\\u003dutf8\\u0026source\\u003duds\\u0026start\\u003d0\\u0026hl\\u003den\\u0026q\\u003dfire\",\"searchResultTime\":\"0.19\"}}, \"responseDetails\": null, \"responseStatus\": 200}";

    public MockGoogleImageSearchClient() {
        responseMap = new HashMap<String , String >();
        responseMap.put(OUT_OF_RANGE,"{\"responseData\": null, \"responseDetails\": \"out of range start\", \"responseStatus\": 400}");
        responseMap.put(ONE_RESULT, oneResult);
        responseMap.put(DEFAULT,defaultResponse);
    }

    @Override
    public String searchImage(String searchTerm, int count, int start) throws NetworkException, MessageException {

        if (searchTerm == null) {
            throw new MessageException("Null search term");
        }

        if(responseMap.get(searchTerm)!=null) {
            return responseMap.get(searchTerm);
        } else if(searchTerm.equals(NETWORK_EXCEPTION)) {
            throw new NetworkException();
        } else if(searchTerm.equals(MESSAGE_EXCEPTION)) {
            throw new MessageException();
        } else {
            return defaultResponse;
        }
    }
}